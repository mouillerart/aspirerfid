<?xml version="1.0" encoding="UTF-8"?>

<project name="Aspire MultiOS Browser Launcher"
         default="util:browse"
         basedir=".">

    <!--
        Copyright 2005-2008, OW2 Aspire RFID project This library is
        free software; you can redistribute it and/or modify it under
        the terms of the GNU Lesser General Public License as published
        by the Free Software Foundation (the "LGPL"); either version 2.1
        of the License, or (at your option) any later version. If you do
        not alter this notice, a recipient may use your version of this
        file under either the LGPL version 2.1, or (at his option) any
        later version. You should have received a copy of the GNU Lesser
        General Public License along with this library; if not, write to
        the Free Software Foundation, Inc., 51 Franklin Street, Fifth
        Floor, Boston, MA 02110-1301 USA. This software is distributed
        on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, either
        express or implied. See the GNU Lesser General Public License
        for the specific language governing rights and limitations.

        Contact: OW2 Aspire RFID project <X AT Y DOT org> (with
        X=aspirerfid and Y=ow2) LGPL version 2.1 full text
        http://www.gnu.org/licenses/lgpl-2.1.txt
    -->


    <!-- Declare alias: -->

    <target name="browse" depends="util:browse">
        <!-- Empty! -->
    </target>


    <!--
        Invokes the default user-agent. Property "user-agent.browse.url"
        must contain the URL to show.
    -->

    <target name="util:browse">
        <if>
            <os family="windows" />
            <then>
                <antcall target="private:browse_MicrosoftWindows" />
            </then>
        </if>

        <if>
            <os family="unix" />
            <then>
                <antcall target="private:browse_GenericUNIX" />
            </then>
        </if>

    </target>


    <target name="private:browse_MicrosoftWindows">
        <property name="user-agent.executable" value="rundll32.exe" />
        <property name="user-agent.executable.arg"
                  value="url.dll, FileProtocolHandler" />

        <antcall target="private:browse_Any" />
    </target>


    <target name="private:browse_GenericUNIX">
        <property name="user-agent.executable" value="mozilla" />
        <!-- NOTE: Wiring "mozilla" is a temporary *HACK*! -->
        <!-- TODO: How to invoke the default browser upon generic UNIX! -->
        <property name="user-agent.executable.arg" value="" />

        <antcall target="private:browse_Any" />
    </target>


    <target name="private:browse_Any">
        <exec dir="${basedir}" executable="${user-agent.executable}">
            <arg line="${user-agent.executable.arg}" />
            <arg line="${user-agent.browse.url}" />
        </exec>
    </target>
</project>